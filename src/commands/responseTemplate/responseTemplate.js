const { getOrderForNumber } = require("../../core/chats/chat-controller");
const Api = require("../../utils/api/api");
const AipUse = require("../../utils/api/apiUse");
const copirite_text = require("../../utils/const/copirite_admin");
const BOT_API_URL = process.env.BOT_API_URL;

const responseTemplate = {
  start: `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –°–µ—Ç–∏ –ø–æ–º–∏–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–ª–æ–≤, –º–µ–Ω—è –∑–æ–≤—É—Ç –ê—Ä–∫–∞–¥–∏–π, —è –º–æ–≥—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –≤ –°–µ—Ç—å –ø–æ–º–∏–Ω–∞–ª—å–Ω—ã—Ö –∑–∞–ª–æ–≤.\
          \n \n–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –æ–±—Ä–∞—â–∞—Ç—å—Å—è ${copirite_text.admin}`,

  about: `–û –Ω–∞—Å`,

  help: `‚ñéüìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è \
\n \n–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–º–∞–Ω–¥—É /registration –∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤–∞—à–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.  \
\n \n–î–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: 8 903 971 8590.\
\n \n---\
\n \n‚ñéüìÑ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏\
\n \n–í –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /orders. –ó–∞—è–≤–∫–∞ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—É–Ω–∫—Ç—ã –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å. \ 
\n \n–ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç—É —Å –≤–∞—à–µ–π –∑–∞—è–≤–∫–æ–π –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.\
\n \n---\
\n \n‚ñéüí¨ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏\
\n \n–í –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞—è–≤–∫–∏:\
\n \n‚Ä¢ –í —Ä–∞–±–æ—Ç–µ (–º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É—Å–ª—É–≥–∏)\
\n \n‚Ä¢ –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞ (–∫–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—Ç–∏–ª –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ)\
\n \n‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –ø—Ä–æ—à–ª–æ, –∑–∞–ø—Ä–æ—à–µ–Ω –æ—Ç–∑—ã–≤ –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ—Ç—á–µ—Ç–Ω–∞—è —á–∞—Å—Ç—å)\
\n \n‚Ä¢ –û—Ç–∫–∞–∑ (–ø–æ—Å–ª–µ –æ—Ç–∫–∞–∑–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—É—Ä–∞—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–∏—Ç –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–∞–∑–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞)\
\n \n---\
\n \n‚ñéüìÑ –†–∞–±–æ—Ç–∞ —Å –∑–∞—è–≤–∫–∞–º–∏ (—É—Ç–æ—á–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ –≤–æ–ø—Ä–æ—Å—ã)\
\n \n1. –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –º–µ–Ω—é –∫–æ–º–∞–Ω–¥—É /chats, –∑–∞–ø—Ä–æ—Å–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ. \ 
\n \n2. –ï—Å–ª–∏ —É –≤–∞—Å –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–µ –∑–∞–∫–∞–∑–∞ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç –∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å. –ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞–º –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç.\
\n \n---\
\n \n‚ñéüåÖ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å\
\n \n‚Ä¢ –ß–µ–∫: –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∫—É—Ä–∞—Ç–æ—Ä –≤—ã—à–ª–µ—Ç —á–µ–∫ —á–µ—Ä–µ–∑ –±–æ—Ç–∞.\
\n \n‚Ä¢ –û—Ç–∑—ã–≤: –≤–∞–º –±—É–¥–µ—Ç –≤—ã—Å–ª–∞–Ω —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—Ç–∑—ã–≤–∞ –æ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏.\
\n \n---\
\n \n‚ñé‚öôÔ∏è –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã\
\n \n‚Ä¢ /start ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞\
\n \n‚Ä¢ /clear ‚Äì —Å–±—Ä–æ—Å–∏—Ç—å —ç—Ç–∞–ø –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –∏ –≤—ã–π—Ç–∏ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞\
\n \n---\
\n \n–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É \
 \n \n@mercyboky –∏–ª–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É +7 903 971 8590`,

  responseToAdminChat: function (numberOrder, message, user) {
    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞
    let order = numberOrder
      ? numberOrder
      : "!–í–Ω–∏–º–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É!";
    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    let tlgMessageId = message.tlgMessageId
      ? message.tlgMessageId
      : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"1371",
    let tlgId = message.tlgId ? message.tlgId : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"931824462",
    let form = message.form ? message.form : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"order",
    let typeOrder; //":"wake",
    switch (message.typeOrder) {
      case "wake":
        typeOrder = "–ø–æ–º–∏–Ω–∞–ª—å–Ω—ã–µ –æ–±–µ–¥—ã";
        break;
      case "feast":
        typeOrder = "–±–∞–Ω–∫–µ—Ç";
        break;
      default:
        typeOrder = "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    }
    let city = message.city ? message.city : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"–ú–æ—Å–∫–≤–∞",
    let timeWake = message.timeWake ? message.timeWake : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"9:00-9:30",
    let nameContact = message.nameContact
      ? message.nameContact
      : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"vvvvvvvvvv",
    let number = message.number ? message.number : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"89013437024",
    let fio = message.fio ? message.fio : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"ddddddddd",
    let dateLeft = message.dateLeft ? message.dateLeft : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"2024-03-15",
    let dateWake = message.dateWake ? message.dateWake : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"2024-03-16",
    let agentIdSPZ = message.agentIdSPZ ? message.agentIdSPZ : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"–î–æ–±–∞–≤–∏—Ç—å"}
    let comment = message.comment ? message.comment : "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–µ—Ç";

    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–∞–≥–µ–Ω—Ç –∏–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä)
    let spzId = user?.spzId ? user?.spzId : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let name = user?.name ? user?.name : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let tlgName = user?.tlgName ? user?.tlgName : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let sponsor = user?.sponsor ? user?.sponsor : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";

    return `–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∑–∞—è–≤–∫–µ ‚Ññ${order}: \
            \n \n \
             \n ID –∞–≥–µ–Ω—Ç–∞ ${spzId} \
             \n –¢–∏–ø –∑–∞—è–≤–∫–∏ ${typeOrder} \
             \n –ì–æ—Ä–æ–¥ ${city} \
             \n –í—Ä–µ–º—è –ø—Ä–æ—â–∞–Ω–∏—è  ${timeWake}\
             \n –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ (–õ–∏–¥) ${nameContact}\
             \n –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ${number}\
             \n –§–ò–û ${fio}\
             \n –î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏ ${dateLeft}\
             \n –î–∞—Ç–∞ –ø—Ä–æ—â–∞–Ω–∏—è ${dateWake}\            
             \n  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: ${comment}\             
             \n –ö—É—Ä–∞—Ç–æ—Ä ${sponsor}\
             \n –ê–≥–µ–Ω—Ç ${tlgName}\
            `;
  },

  responseToAgentChat: function (numberOrder, message, user) {
    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞
    let order = numberOrder
      ? numberOrder
      : "!–í–Ω–∏–º–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É!";
    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    let tlgMessageId = message.tlgMessageId
      ? message.tlgMessageId
      : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"1371",
    let tlgId = message.tlgId ? message.tlgId : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"931824462",
    let form = message.form ? message.form : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"order",
    let typeOrder; //":"wake",
    switch (message.typeOrder) {
      case "wake":
        typeOrder = "–ø–æ–º–∏–Ω–∞–ª—å–Ω—ã–µ –æ–±–µ–¥—ã";
        break;
      case "feast":
        typeOrder = "–±–∞–Ω–∫–µ—Ç";
        break;
      default:
        typeOrder = "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    }
    let city = message.city ? message.city : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"–ú–æ—Å–∫–≤–∞",
    let timeWake = message.timeWake ? message.timeWake : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"9:00-9:30",
    let nameContact = message.nameContact
      ? message.nameContact
      : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"vvvvvvvvvv",
    let number = message.number ? message.number : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"89013437024",
    let fio = message.fio ? message.fio : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"ddddddddd",
    let dateLeft = message.dateLeft ? message.dateLeft : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"2024-03-15",
    let dateWake = message.dateWake ? message.dateWake : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"2024-03-16",
    let agentIdSPZ = message.agentIdSPZ ? message.agentIdSPZ : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"; //":"–î–æ–±–∞–≤–∏—Ç—å"}
    let comment = message.comment ? message.comment : "–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –Ω–µ—Ç";

    // –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–∞–≥–µ–Ω—Ç –∏–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä)
    let spzId = user?.spzId ? user?.spzId : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let name = user?.name ? user?.name : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let tlgName = user?.tlgName ? user?.tlgName : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let sponsor = user?.sponsor ? user?.sponsor : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";

    return `–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞ –ø–æ–¥ ‚Ññ${order}: \            
             \n \n –¢–∏–ø –∑–∞—è–≤–∫–∏ ${typeOrder} \
             \n –ì–æ—Ä–æ–¥ ${city} \
             \n –í—Ä–µ–º—è –ø—Ä–æ—â–∞–Ω–∏—è  ${timeWake}\
             \n –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ (–õ–∏–¥) ${nameContact}\
             \n –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ${number}\
             \n –§–ò–û ${fio}\
             \n –î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏ ${dateLeft}\
             \n –î–∞—Ç–∞ –ø—Ä–æ—â–∞–Ω–∏—è ${dateWake}\            
             \n  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: ${comment}\             
             \n –ù–∞–ø–∏—Å–∞—Ç—å –∫—É—Ä–∞—Ç–æ—Ä—É ${sponsor}\
            `;
  },

  responseToAdminChatAboutRegostration: function (user) {
    // variant user  {"action":"update","name":"–ê–≥–µ–Ω—Ç 007","tlgName":"ManagerTest2","number":"89683289173","tlgId":"6136123702","role":"agent"}
    let name = user.name ? user.name : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let tlgName = user.tlgName ? user.tlgName : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let number = user.number ? user.number : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let role = user.role ? user.role : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    let tlgId = user.tlgId ? user.tlgId : "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";

    let numberTrim = number.replace(/\+/g, ''); // –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å–∏–º–≤–æ–ª—ã '+'

    console.log(numberTrim);

    return `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–µ—Å –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: \            
           \n –¢–µ–ª–µ—Ñ–æ–Ω +${numberTrim} \                     
           \n id —Ç–µ–ª–µ–≥—Ä–∞–º ${tlgId} \
           \n –í–Ω–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —Å—Å—ã–ª–∫–µ:\
           \n  ${BOT_API_URL}Auth_sfp/index\
          `;
  },

  responseToManagerChatAboutQuesrion: async function (message) {
    const pattern = /‚Ññ(.*?)\:/; // –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É "‚Ññ" –∏ ":"
    const result = message.match(pattern);

    if (result) {
      const data = result[1];
     // const orderData = await getOrderForNumber("33520–≤1111");
      const orderData = await getOrderForNumber(data);

      if (orderData[0][0]) {
        let checkPost = {
          action: "check",
          tlgId: `${orderData[0][0].manager_id}`,
        };
        const api = new Api(this.bot);
        const request = await new AipUse(api).checkUser(checkPost);

        if (!request) {
          return `–ü—Ä–æ—Å—å–±–∞ —É—Ç–æ—á–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ –∑–∞—è–≤–∫–µ, –º–µ–Ω–µ–¥–∂–µ—Ä –µ—â–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω ${message} `;
        }

        return `–ü—Ä–æ—Å—å–±–∞ —É—Ç–æ—á–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∑–∞—è–≤–∫–µ\n\n ‚Ññ${result[1]}\n\n–º–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω ${request.spzId}\n\n @${request.tlgName}`;
      }

      return `–ü—Ä–æ—Å—å–±–∞ —É—Ç–æ—á–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ –∑–∞—è–≤–∫–µ, –º–µ–Ω–µ–¥–∂–µ—Ä –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω\n\n ${message} `;
    } else {
      return `–ü—Ä–æ—Å—å–±–∞ —É—Ç–æ—á–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ –∑–∞—è–≤–∫–µ, –º–µ–Ω–µ–¥–∂–µ—Ä –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω\n\n ${message} `;
    }
  },
};

module.exports = responseTemplate;
